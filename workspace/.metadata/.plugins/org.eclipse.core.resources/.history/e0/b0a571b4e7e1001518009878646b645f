package member;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

public class test {

	public static void main(String[] args) throws IOException {
		BufferedReader in = new BufferedReader(new InputStreamReader(System.in));

		InputStream is = null;
		SqlSessionFactory factory = null;
		SqlSession session = null;
		try {
			is = Resources.getResourceAsStream("info.config.xml");
			factory = new SqlSessionFactoryBuilder().build(is);
			session = factory.openSession();

			while (true) {
				printMenu();
				try {
					int num = Integer.parseInt(in.readLine());
					if (num == 1) {
						System.out.println("이름을 입력하세요.");
						String name = in.readLine();
						System.out.println("아이디를 입력하세요.");
						String id = in.readLine();
						System.out.println("비밀번호를 입력하세요.");
						String pwd = in.readLine();
						user u = new user(id, pwd, name);
						int snum = session.insert("member.add", u);
						if (num != 0) {
							System.out.println("회원가입을 축하합니다.");
						} else {
							System.out.println("아이디가 중복 됩니다.");
						}
					} else if (num == 2) {

					} else if (num == 3) {

					} else if (num == 4) {

					} else if (num == 5) {

					} else if (num == 6) {

					} else if (num == 7) {

					} else if (num == 8) {
						System.out.println("종료합니다.");
						System.exit(0);
					}

				} catch (Exception e) {
					System.out.println("다시 입력하세요.");
					continue;
				}
			}
		} catch (Exception e2) {
			
		} finally {
			session.close();
		}

	}

	public static void printMenu() {
		System.out.println("1. 회원가입");
		System.out.println("2. 로그인");
		System.out.println("3. 이름 수정(아이디와 이름 입력)");
		System.out.println("4. 비밀번호 변경(아이디와 비밀번호 입력)");
		System.out.println("5. 아이디 중복체크(아이디입력)");
		System.out.println("6. 비밀번호 찾기(아이디와 이름 입력)");
		System.out.println("7. 회원 탈퇴(비밀번호 다시 입력)");
		System.out.println("8. 종료");
		System.out.println("숫자를 입력 하세요.");
	}

}
